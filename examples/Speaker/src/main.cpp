/*
 * main.cpp
 * Copyright (C) 2022 Takashi Matsuoka <matsujirushi@live.jp>
 * MIT License
 */

////////////////////////////////////////////////////////////////////////////////
// Includes

#include <Arduino.h>
#include <type_traits>

////////////////////////////////////////////////////////////////////////////////
// setup and loop

static const uint16_t wave[] =
{
    511,
    543,
    575,
    607,
    638,
    669,
    699,
    729,
    757,
    785,
    812,
    837,
    861,
    884,
    905,
    925,
    943,
    959,
    974,
    986,
    997,
    1006,
    1013,
    1018,
    1021,
    1022,
    1022,
    1019,
    1014,
    1007,
    998,
    987,
    974,
    959,
    943,
    925,
    905,
    884,
    862,
    838,
    812,
    786,
    758,
    729,
    700,
    670,
    639,
    608,
    576,
    544,
    512,
    480,
    448,
    416,
    385,
    354,
    324,
    294,
    265,
    238,
    211,
    186,
    162,
    139,
    118,
    98,
    80,
    63,
    49,
    36,
    25,
    16,
    9,
    4,
    1,
    0,
    0,
    3,
    8,
    15,
    24,
    35,
    48,
    62,
    78,
    96,
    116,
    137,
    160,
    184,
    209,
    236,
    263,
    292,
    321,
    351,
    382,
    414,
    445,
    477,
    509,
};

static size_t i = 0;

void setup()
{
    Serial.begin(115200);
    delay(1000);
    Serial.println();
    Serial.println();

    analogWriteResolution(10);
}

void loop()
{
    analogWrite(A0, wave[i]);
    i += 1;
    if (i >= std::extent<decltype(wave)>::value) i %= std::extent<decltype(wave)>::value;

    delayMicroseconds(10);
}

////////////////////////////////////////////////////////////////////////////////
